package Lab3;
import java.util.*;

public class Date implements Comparable<Date>{
	private String line, numDate;
	
	public Date(String line){
		this.line = line;
		this.numDate = convertToNumDate(line);
	}
	@Override
	public int compareTo (Date other){
		return 0;
	}
	
	public String convertToNumDate(String line){
		System.out.print("This is converting " + line + " to a num date.");
		StringTokenizer st = new StringTokenizer(line);
		String month = "";
		int day = 0;
		int year = 0;
		int numDays = 0;
		String token = "";
		String numDate = "";
		while (st.hasMoreTokens()){
			System.out.println("I've reached the start of the while loop");
			if (month.equals(""))
				token = st.nextToken();
			switch (token.toLowerCase()){
			case "january":
			case "jan":
			case "jan.":
				month = "01";
				break;
			case "february":
			case "feb":
			case "feb.":
				month = "02";
				break;
			case "march":
			case "mar":
			case "mar.":
				month = "03";
				break;
			case "april":
			case "apr":
			case "apr.":
				month = "04";
				break;
			case "may":
			case "may.":
				month = "05";
				break;
			case "june":
			case "jun":
			case "jun.":
				month = "06";
				break;
			case "july":
			case "jul":
			case "jul.":
				month = "07";
				break;
			case "august":
			case "aug":
			case "aug.":
				month = "08";
				break;
			case "september":
			case "sept":
			case "sept.":
			case "sep":
			case "sep.":
				month = "09";
				break;
			case "october":
			case "oct":
			case "oct.":
				month = "10";
				break;
			case "november":
			case "nov":
			case "nov.":
				month = "11";
				break;
			case "december":
			case "dec":
			case "dec.":
				month = "12";
				break;
			default:
				System.out.println("I can't find the month");
				month = "-1";
				break;
			}
		}
		if (day == 0 && !month.equals("-1")){
			switch (month) {
            case "01":
            case "03":
            case "05":
            case "07":
            case "08":
            case "10":
            case "12":
                numDays = 31;
                break;
            case "04":
            case "06":
            case "09":
            case "11":
                numDays = 30;
                break;
            case "02":
            	//will address leap year once year token is received.
                numDays = 29;
                break;
            default:
            	System.out.println("Number of days can't be determined.");
                numDays = -1;
                break;
			}
			token = st.nextToken();
			StringBuilder sb = new StringBuilder(token);
			sb.deleteCharAt(sb.indexOf(","));
			token = sb.toString();
			int tempDays = Integer.parseInt(token);
			if (tempDays > numDays)
				day = -1;
			if (day == -1)
				return "-1";
			
		}
		if(year == 0 && !month.equals("-1")){
			token = st.nextToken();
			year = Integer.parseInt(token);
			if (month.equals("02")){
				if (((year % 4 == 0) && 
	                     !(year % 100 == 0))
	                     || (year % 400 == 0))
	                    numDays = 29;
	                else
	                    numDays = 28;
				if (day > numDays)
					return "-1";
			}
			if (year > 2199 || year < 1900)
				return "-1";
		}
		numDate = (token + "-" + month + "-" + day);
		System.out.print("numDate: " + numDate);
		return numDate;
	}
	@Override
	public String toString() {
		return "Date: " + line;
	}
	public String getLine() {
		return line;
	}
	public void setLine(String line) {
		this.line = line;
	}
	public String getNumDate() {
		return numDate;
	}
	public void setNumDate(String numDate) {
		this.numDate = numDate;
	}
	

}
